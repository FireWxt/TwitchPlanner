<!-- HEADER -->
<div class="planningHeader" *ngIf="planning">
  <div class="left">
    <div class="title">Planning de stream</div>
    <div class="range">
      {{ formatPlanningRange(planning.start_date, planning.end_date) }}
    </div>
  </div>

  <div class="right">
    <div class="logo">Logo</div>
    <div class="avatar">ğŸ‘¤</div>
  </div>
</div>

<!-- SI PAS DE PLANNING -->
<div *ngIf="!planning && !loading" class="empty">
  <h2>CrÃ©er un planning</h2>

  <label>Titre</label>
  <input [(ngModel)]="planningForm.title" />

  <label>DÃ©but</label>
  <input type="date" [(ngModel)]="planningForm.start_date" [min]="minStartDate" />



  <button (click)="createPlanning()">CrÃ©er</button>

  <div class="error" *ngIf="error">{{ error }}</div>
</div>

<!-- GRILLE (Lunâ†’Dim) -->
<div class="weekGrid" *ngIf="planning">
  <div class="dayCol" *ngFor="let d of days">

    <div class="dayHeader">{{ d.label }}</div>

    <button class="addSlot" (click)="openAddEvent(d.value)">+</button>

    <!-- events -->
    <div class="eventCard" *ngFor="let ev of getEventsForDay(d.value)">
      <div class="time">{{ ev.start_time }}</div>
      <div class="name">{{ ev.stream_title }}</div>

      <button class="trash" (click)="deleteEvenement(getEventId(ev))">ğŸ—‘</button>
    </div>

    <!-- OFF si aucun event -->
    <div class="off" *ngIf="getEventsForDay(d.value).length === 0">
      OFF
    </div>

  </div>
</div>

<!-- MODAL AJOUT EVENT -->
<div class="modalBackdrop" *ngIf="showEventForm">
  <div class="modal">
    <h3>Ajouter un crÃ©neau</h3>

    <label>Titre</label>
    <input [(ngModel)]="eventForm.stream_title" />

    <label>Heure dÃ©but</label>
    <input type="time" [(ngModel)]="eventForm.start_time" />

    <label>Heure fin</label>
    <input type="time" [(ngModel)]="eventForm.end_time" />

    <div class="actions">
      <button (click)="addEvenement()">Ajouter</button>
      <button (click)="closeAddEvent()">Annuler</button>
    </div>
  </div>
</div>
